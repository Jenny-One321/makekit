## 
##  metakit -- the extensible meta-build system
##  Copyright (C) Brian Koropoff
## 
##  This program is free software; you can redistribute it and/or
##  modify it under the terms of the GNU General Public License
##  as published by the Free Software Foundation; either version 2
##  of the License, or (at your option) any later version.
## 
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
## 
##  You should have received a copy of the GNU General Public License
##  along with this program; if not, write to the Free Software
##  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
## 
##  The source code contained within this file is also subject to the
##  following additional terms:
## 
##  1. "Program" below refers to metakit or any derivative work thereof
##     under copyright law. "Unmodified" below refers to the Program
##     prior to any modification by the licensee, in a form which was
##     distributed while fully abiding by the terms of the GNU General
##     Public License and these additional clauses. "Unmodified Version"
##     refers to the Unmodified Program or the portion thereof from which
##     the licensee's modified version is derived.  Each licensee is
##     addressed as "you."
## 
##  2. As a special exception to the terms of the GNU General Public License,
##     you are granted unlimited permission to copy, distribute, and modify
##     the output of the Program, even when such output contains portions
##     of the Program source code which are otherwise governed by the terms
##     of the GNU General Public License.  When distributing a modified
##     version of the Program, you may choose to extend this special
##     exception to your modified version as well.
## 
##  3. The exception in clause 2 applies only to portions of the Program which
##     appear in a file containing these additional clauses.  You may not
##     extend this exception to portions of the Program which are contained
##     in a file that does not contain these clauses.  In addition, you may
##     not extend the exception to your modified version under any of the
##     following circumstances:
## 
##     a)  You move, copy, combine, or otherwise modify portions of the
##         Program such that a file is produced which:
##         
##         i.  Contains portions of the Program which, in the Unmodified
##             Version, were contained in a file which contained these
##             additional clauses; and
## 
##         ii. Contains portions of the Program which, in the Unmodified
##             Version, were contained in a file which did not contain these
##             additional clauses.
## 
##     b)  You modify the behavior of the Program such that it may copy portions
##         of the Program into its output where said portions, in the Unmodified
##         Version, were contained in a file which did not contain these clauses.
## 
##  4.  If any of the circumstances in clause 3 apply, you must remove these clauses
##      from the affected portions of your version of the Program in order to
##      distribute it.  In the case of (3.i), this means the offending file which
##      contains the inappropriately combined portions of the Program.  In the case
##      of (3.ii), it means the entirety of the Program.
## 

DEPENDS="mk"
OPTIONS='
prefix                 path       Set install prefix

libdir-name            name       Set name of directory for installed
                                  libraries (within prefix)

bindir-name            name       Set name of directory for installed
                                  user binaries (within prefix)

sbindir-name           name       Set name of directory for installed
                                  system binaries (within prefix)

sysconfdir-name        name       Set name of directory for configuration
                                  files (within prefix)

localstatedir          path       Set path of directory for state files

libdir                 path       Set path of directory for installed
                                  libraries

bindir                 path       Set path of directory for installed
                                  user binaries

sbindir                path       Set path of directory for installed
                                  system binaries

sysconfdir             path       Set path of directory for configuration
                                  files

localstatedir          path       Set path of directory for state files
'

configure()
{
    [ -z "${MK_PREFIX}" ] && MK_PREFIX="/usr/local"
    [ -z "${MK_LIBDIR_NAME}" ] && MK_LIBDIR_NAME="lib"
    [ -z "${MK_BINDIR_NAME}" ] && MK_BINDIR_NAME="bin"
    [ -z "${MK_SBINDIR_NAME}" ] && MK_SBINDIR_NAME="sbin"
    [ -z "${MK_SYSCONFDIR_NAME}" ] && MK_SYSCONFDIR_NAME="etc"
    [ -z "${MK_LOCALSTATEDIR_NAME}" ] && MK_LOCALSTATEDIR_NAME="var"

    [ -z "${MK_PREFIX}" ] && MK_PREFIX="/usr/local"
    [ -z "${MK_LIBDIR}" ] && MK_LIBDIR="${MK_PREFIX}/${MK_LIBDIR_NAME}"
    [ -z "${MK_BINDIR}" ] && MK_BINDIR="${MK_PREFIX}/${MK_BINDIR_NAME}"
    [ -z "${MK_SBINDIR}" ] && MK_SBINDIR="${MK_PREFIX}/${MK_SBINDIR_NAME}"
    [ -z "${MK_SYSCONFDIR}" ] && MK_SYSCONFDIR="${MK_PREFIX}/${MK_SYSCONFDIR_NAME}"
    [ -z "${MK_LOCALSTATEDIR}" ] && MK_LOCALSTATEDIR="${MK_PREFIX}/${MK_LOCALSTATEDIR_NAME}"
    
    mk_log "prefix: ${MK_PREFIX}"
    mk_log "libdir: ${MK_LIBDIR}"
    mk_log "bindir: ${MK_BINDIR}"
    mk_log "sbindir: ${MK_SBINDIR}"
    mk_log "sysconfdir: ${MK_SYSCONFDIR}"
    mk_log "localstatedir: ${MK_LOCALSTATEDIR}"

    mk_define MK_PREFIX  
    mk_define MK_LIBDIR_NAME MK_SBINDIR_NAME MK_SYSCONFDIR_NAME MK_LOCALSTATEDIR_NAME
    mk_define MK_LIBDIR MK_BINDIR MK_SBINDIR MK_SYSCONFDIR MK_LOCALSTATEDIR
}
