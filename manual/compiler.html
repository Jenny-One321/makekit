<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>compiler</title><link rel="stylesheet" type="text/css" href="docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /><link rel="home" href="index.html" title="MakeKit Manual" /><link rel="up" href="rn03.html" title="Compiler Module" /><link rel="prev" href="rn03.html" title="Compiler Module" /><link rel="next" href="MK_CC.html" title="MK_CC" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">compiler</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="rn03.html">Prev</a> </td><th width="60%" align="center">Compiler Module</th><td width="20%" align="right"> <a accesskey="n" href="MK_CC.html">Next</a></td></tr></table><hr /></div><div class="refentry" title="compiler"><a id="compiler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>compiler — Build C/C++ projects</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="programlisting">
MODULES="... compiler ..."</pre></div><div class="refsection" title="Description"><a id="idp2880776"></a><h2>Description</h2>
<p>
<code class="literal">compiler</code> is the standard MakeKit module which provides an interface
to the system C compiler.  It contains functions to check for available headers, libraries,
functions, types, and system and compiler characteristics, and to build programs, libraries,
and dynamically-loadable objects from C source code.
</p>
<p>
Most <code class="literal">compiler</code> functions support a set of common parameters which are
listed here rather than duplicated in the references for every individual function.
</p>
<p>
</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">DEPS=</code><em class="replaceable"><code>targets</code></em></span></dt><dd><p>
          Specifies additional arbitrary dependencies in MakeKit target notation.  This is useful,
          for example, if one of your source files depends on a header file which you generate on
          the fly (e.g. from yacc or lex).
          Alternatively, you could specify dependencies for individual source files using
          <code class="function"><a class="xref" href="mk_target.html" title="mk_target"><span class="refentrytitle">mk_target</span></a></code> with an empty command.
          Applicable to all functions.
    </p></dd><dt><span class="term"><code class="literal">INCLUDEDIRS=</code><em class="replaceable"><code>paths</code></em></span></dt><dd><p>
          A space-separated list of relative paths where the compiler should search for header files.
          Even if you only use header files in the same directory as <code class="literal">MakeKitBuild</code>,
          you must explicitly specify <code class="literal">.</code>.
          Applicable functions: 
        <code class="function"><a class="xref" href="mk_compile.html" title="mk_compile"><span class="refentrytitle">mk_compile</span></a></code>,
        <code class="function"><a class="xref" href="mk_program.html" title="mk_program"><span class="refentrytitle">mk_program</span></a></code>,
        <code class="function"><a class="xref" href="mk_group.html" title="mk_group"><span class="refentrytitle">mk_group</span></a></code>,
        <code class="function"><a class="xref" href="mk_library.html" title="mk_library"><span class="refentrytitle">mk_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_dlo.html" title="mk_dlo"><span class="refentrytitle">mk_dlo</span></a></code>
    </p></dd><dt><span class="term"><code class="literal">HEADERDEPS=</code><em class="replaceable"><code>headers</code></em></span></dt><dd><p>
          A space-separated list of public header files (e.g. in <code class="literal">/usr/local/include</code>)
          that one or more source files depend on.  You only need to specify header files installed by other
          MakeKit projects.  If you are careful about specifying dependencies in this way, it allows you
          to structure your larger project as multiple subprojects which can be configured and built either
          individually or together.  When building individually, <code class="literal">HEADERDEPS</code> ensures sure you
          are performing configure checks for the headers.  When building together, <code class="literal">HEADERDEPS</code>
          ensures source files are compiled only once the header files they need have been installed.
          Applicable functions: 
        <code class="function"><a class="xref" href="mk_compile.html" title="mk_compile"><span class="refentrytitle">mk_compile</span></a></code>,
        <code class="function"><a class="xref" href="mk_program.html" title="mk_program"><span class="refentrytitle">mk_program</span></a></code>,
        <code class="function"><a class="xref" href="mk_group.html" title="mk_group"><span class="refentrytitle">mk_group</span></a></code>,
        <code class="function"><a class="xref" href="mk_library.html" title="mk_library"><span class="refentrytitle">mk_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_dlo.html" title="mk_dlo"><span class="refentrytitle">mk_dlo</span></a></code>
    </p></dd><dt><span class="term"><code class="literal">LIBDEPS=</code><em class="replaceable"><code>libs</code></em></span></dt><dd><p>
          A space-separated list of library names to link into the resulting binary,
          without filename extensions or <code class="literal">lib</code> prefixed to the name.
          Applicable functions: 
        <code class="function"><a class="xref" href="mk_program.html" title="mk_program"><span class="refentrytitle">mk_program</span></a></code>,
        <code class="function"><a class="xref" href="mk_group.html" title="mk_group"><span class="refentrytitle">mk_group</span></a></code>,
        <code class="function"><a class="xref" href="mk_library.html" title="mk_library"><span class="refentrytitle">mk_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_prebuilt_library.html" title="mk_prebuilt_library"><span class="refentrytitle">mk_prebuilt_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_dlo.html" title="mk_dlo"><span class="refentrytitle">mk_dlo</span></a></code>
    </p></dd><dt><span class="term"><code class="literal">LIBDIRS=</code><em class="replaceable"><code>paths</code></em></span></dt><dd><p>
          A space-separated list of additional directories to look for libraries
          when linking.  The paths should be absolute (e.g. <code class="literal">/usr/foobar/lib</code>),
          but they are taken to reference the staging directory.  This is only useful
          if you need to install and link against a library in a location other than
          <code class="varname">$MK_LIBDIR</code>.  To look for system libaries in non-standard locations,
          use <code class="literal">LDFLAGS</code> or <code class="varname">MK_LDFLAGS</code>, or a helper
          module like <code class="literal">pkg-config</code> when possible.
          Applicable functions: 
        <code class="function"><a class="xref" href="mk_program.html" title="mk_program"><span class="refentrytitle">mk_program</span></a></code>,
        <code class="function"><a class="xref" href="mk_group.html" title="mk_group"><span class="refentrytitle">mk_group</span></a></code>,
        <code class="function"><a class="xref" href="mk_library.html" title="mk_library"><span class="refentrytitle">mk_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_dlo.html" title="mk_dlo"><span class="refentrytitle">mk_dlo</span></a></code>
    </p></dd><dt><span class="term"><code class="literal">GROUPS=</code><em class="replaceable"><code>groups</code></em></span></dt><dd><p>
      </p><p>
          A space-separated list of object file groups which should be merged
          into the resulting binary.
      </p><p>
      </p><p>
          Applicable functions: 
        <code class="function"><a class="xref" href="mk_program.html" title="mk_program"><span class="refentrytitle">mk_program</span></a></code>,
        <code class="function"><a class="xref" href="mk_library.html" title="mk_library"><span class="refentrytitle">mk_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_dlo.html" title="mk_dlo"><span class="refentrytitle">mk_dlo</span></a></code>
      </p><p>
    </p></dd><dt><span class="term"><code class="literal">OBJECTS=</code><em class="replaceable"><code>objects</code></em></span></dt><dd><p>
      </p><p>
          A space-separated list of additional object files to link into the resulting
          binary.  This is useful if you use <code class="function"><a class="xref" href="mk_compile.html" title="mk_compile"><span class="refentrytitle">mk_compile</span></a></code> to control
          compiler flags on a per-source-file basis and need to combine the resulting
          objects into a binary, or if you have object files without source code that
          you need to link.  If this parameter is specified, you do not need to
          specify <code class="literal">SOURCES</code>, but you may.
      </p><p>
      </p><p>
          Applicable functions: 
        <code class="function"><a class="xref" href="mk_program.html" title="mk_program"><span class="refentrytitle">mk_program</span></a></code>,
        <code class="function"><a class="xref" href="mk_group.html" title="mk_group"><span class="refentrytitle">mk_group</span></a></code>,
        <code class="function"><a class="xref" href="mk_library.html" title="mk_library"><span class="refentrytitle">mk_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_dlo.html" title="mk_dlo"><span class="refentrytitle">mk_dlo</span></a></code>
      </p><p>
    </p></dd><dt><span class="term"><code class="literal">INSTALLDIR=</code><em class="replaceable"><code>path</code></em></span></dt><dd><p>
      </p><p>
          If specified, changes the location where the resulting binary will
          be installed in the filesystem.  Defaults to what you would expect for the
          kind of binary being produced, e.g. program executables go in
          <code class="varname">$MK_BINDIR</code>, usually <code class="literal">/usr/local/bin</code>.
      </p><p>
      </p><p>
          Applicable functions: 
        <code class="function"><a class="xref" href="mk_program.html" title="mk_program"><span class="refentrytitle">mk_program</span></a></code>,
        <code class="function"><a class="xref" href="mk_library.html" title="mk_library"><span class="refentrytitle">mk_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_prebuilt_library.html" title="mk_prebuilt_library"><span class="refentrytitle">mk_prebuilt_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_dlo.html" title="mk_dlo"><span class="refentrytitle">mk_dlo</span></a></code>
      </p><p>
    </p></dd><dt><span class="term"><code class="literal">EXT=</code><em class="replaceable"><code>extension</code></em></span></dt><dd><p>
      </p><p>
          Overrides the extension of the resulting file.
      </p><p>
      </p><p>
          Applicable functions: 
        <code class="function"><a class="xref" href="mk_library.html" title="mk_library"><span class="refentrytitle">mk_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_prebuilt_library.html" title="mk_prebuilt_library"><span class="refentrytitle">mk_prebuilt_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_dlo.html" title="mk_dlo"><span class="refentrytitle">mk_dlo</span></a></code>
      </p><p>
    </p></dd><dt><span class="term"><code class="literal">CPPFLAGS=</code><em class="replaceable"><code>flags</code></em>, </span><span class="term"><code class="literal">CFLAGS=</code><em class="replaceable"><code>flags</code></em>, </span><span class="term"><code class="literal">LDFLAGS=</code><em class="replaceable"><code>flags</code></em></span></dt><dd><p>
      </p><p>
          Specifies additional flags passed to the compiler when preprocessing,
          compiling, and linking, respectively.  These parameters are added to
          and do not override those in the <code class="varname">MK_CPPFLAGS</code>,
          <code class="varname">MK_CFLAGS</code>, and <code class="varname">MK_LDFLAGS</code>
          variables.  All default to being empty.
      </p><p>
    </p></dd><dt><span class="term"><code class="literal">PCH=</code><em class="replaceable"><code>header</code></em></span></dt><dd><p>
      </p><p>
        Specifies a header to automatically precompile and include when
        building source files.  Precompiled headers can speed up
        compilation of some projects.  If the header is also included
        directly by the source code, it should use include guards to
        avoid being processed twice.
      </p><p>
      </p><p>
        The <code class="varname">result</code> of an explict call to
        <code class="function"><a class="xref" href="mk_pch.html" title="mk_pch"><span class="refentrytitle">mk_pch</span></a></code> may be used instead of a plain header.
        This allows sharing a single precompiled header across multiple build
        targets, but care must be taken to ensure that compiler
        flags match or the precompiled header may be rejected.
      </p><p>
      </p><p>
        Applicable functions: 
        <code class="function"><a class="xref" href="mk_compile.html" title="mk_compile"><span class="refentrytitle">mk_compile</span></a></code>,
        <code class="function"><a class="xref" href="mk_group.html" title="mk_group"><span class="refentrytitle">mk_group</span></a></code>,
        <code class="function"><a class="xref" href="mk_program.html" title="mk_program"><span class="refentrytitle">mk_program</span></a></code>,
        <code class="function"><a class="xref" href="mk_library.html" title="mk_library"><span class="refentrytitle">mk_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_dlo.html" title="mk_dlo"><span class="refentrytitle">mk_dlo</span></a></code>
      </p><p>
    </p></dd><dt><span class="term"><code class="literal">COMPILER=</code><em class="replaceable"><code>compiler</code></em></span></dt><dd><p>
      </p><p>
        Explicitly overrides the compiler used to build source files.
        Must be precisely <code class="literal">c</code> or <code class="literal">c++</code>.
      </p><p>
      </p><p>
        Applicable functions: 
        <code class="function"><a class="xref" href="mk_compile.html" title="mk_compile"><span class="refentrytitle">mk_compile</span></a></code>,
        <code class="function"><a class="xref" href="mk_pch.html" title="mk_pch"><span class="refentrytitle">mk_pch</span></a></code>,
        <code class="function"><a class="xref" href="mk_group.html" title="mk_group"><span class="refentrytitle">mk_group</span></a></code>,
        <code class="function"><a class="xref" href="mk_program.html" title="mk_program"><span class="refentrytitle">mk_program</span></a></code>,
        <code class="function"><a class="xref" href="mk_library.html" title="mk_library"><span class="refentrytitle">mk_library</span></a></code>,
        <code class="function"><a class="xref" href="mk_dlo.html" title="mk_dlo"><span class="refentrytitle">mk_dlo</span></a></code>
      </p><p>
    </p></dd></dl></div><p>
</p>
</div><div class="refsection" title="Variables"><a id="idp3322328"></a><h2>Variables</h2><p><a class="xref" href="MK_CC.html" title="MK_CC"><span class="refentrytitle">MK_CC</span></a></p><p><a class="xref" href="MK_CXX.html" title="MK_CXX"><span class="refentrytitle">MK_CXX</span></a></p><p><a class="xref" href="MK_CPPFLAGS.html" title="MK_CPPFLAGS"><span class="refentrytitle">MK_CPPFLAGS</span></a></p><p><a class="xref" href="MK_CFLAGS.html" title="MK_CFLAGS"><span class="refentrytitle">MK_CFLAGS</span></a></p><p><a class="xref" href="MK_CXXFLAGS.html" title="MK_CXXFLAGS"><span class="refentrytitle">MK_CXXFLAGS</span></a></p><p><a class="xref" href="MK_LDFLAGS.html" title="MK_LDFLAGS"><span class="refentrytitle">MK_LDFLAGS</span></a></p><p><a class="xref" href="MK_ISA_CPPFLAGS.html" title="MK_ISA_CPPFLAGS"><span class="refentrytitle">MK_ISA_CPPFLAGS</span></a></p><p><a class="xref" href="MK_ISA_CFLAGS.html" title="MK_ISA_CFLAGS"><span class="refentrytitle">MK_ISA_CFLAGS</span></a></p><p><a class="xref" href="MK_ISA_CXXFLAGS.html" title="MK_ISA_CXXFLAGS"><span class="refentrytitle">MK_ISA_CXXFLAGS</span></a></p><p><a class="xref" href="MK_ISA_LDFLAGS.html" title="MK_ISA_LDFLAGS"><span class="refentrytitle">MK_ISA_LDFLAGS</span></a></p><p><a class="xref" href="MK_CC_STYLE.html" title="MK_CC_STYLE"><span class="refentrytitle">MK_CC_STYLE</span></a></p><p><a class="xref" href="MK_CXX_STYLE.html" title="MK_CXX_STYLE"><span class="refentrytitle">MK_CXX_STYLE</span></a></p><p><a class="xref" href="MK_CC_LD_STYLE.html" title="MK_CC_LD_STYLE"><span class="refentrytitle">MK_CC_LD_STYLE</span></a></p><p><a class="xref" href="MK_CXX_LD_STYLE.html" title="MK_CXX_LD_STYLE"><span class="refentrytitle">MK_CXX_LD_STYLE</span></a></p><p><a class="xref" href="MK_RPATHFLAGS.html" title="MK_RPATHFLAGS"><span class="refentrytitle">MK_RPATHFLAGS</span></a></p><p><a class="xref" href="MK_HEADERDEPS.html" title="MK_HEADERDEPS"><span class="refentrytitle">MK_HEADERDEPS</span></a></p><p><a class="xref" href="MK_LIBDEPS.html" title="MK_LIBDEPS"><span class="refentrytitle">MK_LIBDEPS</span></a></p></div><div class="refsection" title="Functions"><a id="idp3319184"></a><h2>Functions</h2><p><a class="xref" href="mk_defname.html" title="mk_defname"><span class="refentrytitle">mk_defname</span></a></p><p><a class="xref" href="mk_compile.html" title="mk_compile"><span class="refentrytitle">mk_compile</span></a></p><p><a class="xref" href="mk_pch.html" title="mk_pch"><span class="refentrytitle">mk_pch</span></a></p><p><a class="xref" href="mk_library.html" title="mk_library"><span class="refentrytitle">mk_library</span></a></p><p><a class="xref" href="mk_prebuilt_library.html" title="mk_prebuilt_library"><span class="refentrytitle">mk_prebuilt_library</span></a></p><p><a class="xref" href="mk_dlo.html" title="mk_dlo"><span class="refentrytitle">mk_dlo</span></a></p><p><a class="xref" href="mk_group.html" title="mk_group"><span class="refentrytitle">mk_group</span></a></p><p><a class="xref" href="mk_program.html" title="mk_program"><span class="refentrytitle">mk_program</span></a></p><p><a class="xref" href="mk_headers.html" title="mk_headers"><span class="refentrytitle">mk_headers</span></a></p><p><a class="xref" href="mk_define.html" title="mk_define"><span class="refentrytitle">mk_define</span></a></p><p><a class="xref" href="mk_config_header.html" title="mk_config_header"><span class="refentrytitle">mk_config_header</span></a></p><p><a class="xref" href="mk_try_compile.html" title="mk_try_compile"><span class="refentrytitle">mk_try_compile</span></a></p><p><a class="xref" href="mk_try_link.html" title="mk_try_link"><span class="refentrytitle">mk_try_link</span></a></p><p><a class="xref" href="mk_check_header.html" title="mk_check_header"><span class="refentrytitle">mk_check_header</span></a></p><p><a class="xref" href="mk_check_headers.html" title="mk_check_headers"><span class="refentrytitle">mk_check_headers</span></a></p><p><a class="xref" href="mk_check_function.html" title="mk_check_function"><span class="refentrytitle">mk_check_function</span></a></p><p><a class="xref" href="mk_check_functions.html" title="mk_check_functions"><span class="refentrytitle">mk_check_functions</span></a></p><p><a class="xref" href="mk_check_library.html" title="mk_check_library"><span class="refentrytitle">mk_check_library</span></a></p><p><a class="xref" href="mk_check_libraries.html" title="mk_check_libraries"><span class="refentrytitle">mk_check_libraries</span></a></p><p><a class="xref" href="mk_check_type.html" title="mk_check_type"><span class="refentrytitle">mk_check_type</span></a></p><p><a class="xref" href="mk_check_types.html" title="mk_check_types"><span class="refentrytitle">mk_check_types</span></a></p><p><a class="xref" href="mk_check_member.html" title="mk_check_member"><span class="refentrytitle">mk_check_member</span></a></p><p><a class="xref" href="mk_check_members.html" title="mk_check_members"><span class="refentrytitle">mk_check_members</span></a></p><p><a class="xref" href="mk_check_sizeof.html" title="mk_check_sizeof"><span class="refentrytitle">mk_check_sizeof</span></a></p><p><a class="xref" href="mk_check_sizeofs.html" title="mk_check_sizeofs"><span class="refentrytitle">mk_check_sizeofs</span></a></p><p><a class="xref" href="mk_check_endian.html" title="mk_check_endian"><span class="refentrytitle">mk_check_endian</span></a></p><p><a class="xref" href="mk_check_lang.html" title="mk_check_lang"><span class="refentrytitle">mk_check_lang</span></a></p><p><a class="xref" href="mk_compiler_warnings.html" title="mk_compiler_warnings"><span class="refentrytitle">mk_compiler_warnings</span></a></p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="rn03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="rn03.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="MK_CC.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Compiler Module </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> MK_CC</td></tr></table></div></body></html>