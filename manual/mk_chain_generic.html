<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>mk_chain_generic</title><link rel="stylesheet" type="text/css" href="docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /><link rel="home" href="index.html" title="MakeKit Manual" /><link rel="up" href="rn04.html" title="Chaining Modules" /><link rel="prev" href="chain-generic.html" title="chain-generic" /><link rel="next" href="mk_chain_generic_stage.html" title="mk_chain_generic_stage" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">mk_chain_generic</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chain-generic.html">Prev</a> </td><th width="60%" align="center">Chaining Modules</th><td width="20%" align="right"> <a accesskey="n" href="mk_chain_generic_stage.html">Next</a></td></tr></table><hr /></div><div class="refentry" title="mk_chain_generic"><a id="mk_chain_generic"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>mk_chain_generic — Chain into component with foreign build system</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="programlisting">
MODULES="... chain-generic ..."</pre><div class="cmdsynopsis"><p><code class="function">mk_chain_generic</code>  <code class="literal">TARGETS=</code><em class="replaceable"><code>targets</code></em>   <code class="literal">CONFIGURE=</code><em class="replaceable"><code>cfunc</code></em>   <code class="literal">BUILD=</code><em class="replaceable"><code>bfunc</code></em> </p></div></div><div class="refsection" title="Options"><a id="idp3687464"></a><h2>Options</h2><div class="variablelist"><dl><dt><span class="term"><code class="literal">SOURCEDIR=</code><em class="replaceable"><code>dir</code></em></span></dt><dd><p>
Specifies that source files for the component are found in <em class="replaceable"><code>dir</code></em> relative to the current <code class="literal">MakeKitBuild</code> file.  Defaults to '<code class="literal">.</code>'.
</p></dd><dt><span class="term"><code class="literal">TARGETS=</code><em class="replaceable"><code>targets</code></em></span></dt><dd><p>
Specifies a list of targets that will be generated by the component.  As an extension to the usual target syntax (see <code class="function"><a class="xref" href="mk_resolve_target.html" title="mk_resolve_target"><span class="refentrytitle">mk_resolve_target</span></a></code>), you may suffix each target with a <code class="literal">:</code> and a list of targets it depends on.  This is useful for specifying interdependencies between targets generated by the component. Note that these lists within a list require an additional level of shell quoting.
</p></dd><dt><span class="term"><code class="literal">DEPS=</code><em class="replaceable"><code>deps</code></em></span></dt><dd><p>
Specifies a list of target dependencies before the component can be configured
</p></dd><dt><span class="term"><code class="literal">BUILDDEPS=</code><em class="replaceable"><code>bdeps</code></em></span></dt><dd><p>
Specifies a list of target dependencies needed to build but not configure the component
</p></dd><dt><span class="term"><code class="literal">CONFIGURE=</code><em class="replaceable"><code>cfunc</code></em></span></dt><dd><p>
Specifies a function which will be invoked with the source directory and build directory as its two arguments.  It should prepare the build directory for building the component (e.g. by running a <code class="literal">configure</code> script or similar).
</p></dd><dt><span class="term"><code class="literal">BUILD=</code><em class="replaceable"><code>bfunc</code></em></span></dt><dd><p>
Specifies a function which will be invoked with the build directory and output directory as its two arguments. It should build and install any build products into the output directory (e.g. by running <code class="literal">make</code> and <code class="literal">make DESTDIR=... install</code>).
</p></dd><dt><span class="term"><code class="literal">STAGE=</code><em class="replaceable"><code>sfunc</code></em></span></dt><dd><p>
Specifies a function which will be invoked with one of the targets in <em class="replaceable"><code>targets</code></em> as its first parameter and a list of output directories as its subsequent parameters.  It should generate the target from the output directories in a sensible way (e.g. simply copying it).  This defaults to <code class="function"><a class="xref" href="mk_chain_generic_stage.html" title="mk_chain_generic_stage"><span class="refentrytitle">mk_chain_generic_stage</span></a></code>.
</p></dd><dt><span class="term"><code class="literal">PASSVARS=</code><em class="replaceable"><code>vars</code></em></span></dt><dd><p>
Specifies a list of variables whose current values will be captured and made available to <em class="replaceable"><code>cfunc</code></em>, <em class="replaceable"><code>bfunc</code></em>, and <em class="replaceable"><code>sfunc</code></em> when they are invoked.
</p></dd></dl></div></div><div class="refsection" title="Description"><a id="idp3695696"></a><h2>Description</h2>
<p>
This function provides a generic mechanism to chain into a bundled
component with a foreign build system.  You must specify a list of
targets which will be generated and at least two functions to carry
out the actual build.  The first, <em class="replaceable"><code>cfunc</code></em>, should
make preparations for the component to be built in a dedicated build
directory.  The second, <em class="replaceable"><code>bfunc</code></em>, should build the component
and install it into a dedicated output directory.  You may optionally
specify your own <em class="replaceable"><code>sfunc</code></em> which transfers the installed
files from the output directories into the staging area, but the
default will work fine as long as the output directory has the same
layout as the staging area.
</p>
<p>
On systems that support "fat" binaries, and when targeting the
host system (but not a particular ISA), the component will be
be configured and built for each ISA.  A custom <em class="replaceable"><code>sfunc</code></em>
can be used to decide how to to create each target from the multiple
outputs.
</p>
<p>
This function is very generic.  If you wish to build projects
which invoke the C or C++ compiler, consider using 
<code class="function"><a class="xref" href="mk_chain_compiler.html" title="mk_chain_compiler"><span class="refentrytitle">mk_chain_compiler</span></a></code> instead.
</p>
<p>
This function sets <code class="varname">result</code> to a target that
depends on all other targets it defined.
</p>
</div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chain-generic.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="rn04.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="mk_chain_generic_stage.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">chain-generic </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> mk_chain_generic_stage</td></tr></table></div></body></html>